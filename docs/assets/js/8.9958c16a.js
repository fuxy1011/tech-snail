(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{288:function(t,a,s){"use strict";s.r(a);var n=s(38),r=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"js闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js闭包","aria-hidden":"true"}},[t._v("#")]),t._v(" js闭包")]),t._v(" "),s("p",[t._v("前端面试，几乎逢面必考题")]),t._v(" "),s("h2",{attrs:{id:"什么是闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是闭包","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是闭包")]),t._v(" "),s("p",[t._v("函数A中包含函数B，函数B中使用了未声明定义的自由变量x，同时函数A返回了函数B，此时就形成了闭包")]),t._v(" "),s("h2",{attrs:{id:"自由变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自由变量","aria-hidden":"true"}},[t._v("#")]),t._v(" 自由变量")]),t._v(" "),s("p",[t._v("函数中使用了未定义的变量的就叫做自由变量")]),t._v(" "),s("h2",{attrs:{id:"父级作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#父级作用域","aria-hidden":"true"}},[t._v("#")]),t._v(" 父级作用域")]),t._v(" "),s("p",[t._v("函数中使用了自由变量，在自由变量输出的时候，会由内到外一级一级向上查找这个自由变量的定义。")]),t._v(" "),s("p",[t._v("注意点:")]),t._v(" "),s("ul",[s("li",[t._v("自由变量的值是在父级作用域定义时确定的，而不是执行时确定的")]),t._v(" "),s("li",[t._v("执行时可以通过赋值改变自由变量的值。")])]),t._v(" "),s("h2",{attrs:{id:"写一个闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写一个闭包","aria-hidden":"true"}},[t._v("#")]),t._v(" 写一个闭包")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此时的值为100")]),t._v("\n")])])]),s("h2",{attrs:{id:"常见闭包面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见闭包面试题","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见闭包面试题")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//输出1到9")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//实际运行结果输出9次10")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//修改方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n1、let\nfor(let i = 1; i < 10; i++) {\n\tsetTimeout(function() {\n\t\tconsole.log(i);//结果正常输出1到9\n\t})\n}\n\n2、闭包\nfor(var i = 1; i < 10; i++) {\n\t(function(i) {\n\t\tsetTimeout(function() {\n\t\t\tconsole.log(i);//结果正常输出1到9\n\t\t})\n\t})(i);\n}\n*/")]),t._v("\n")])])]),s("h2",{attrs:{id:"用途"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用途","aria-hidden":"true"}},[t._v("#")]),t._v(" 用途")]),t._v(" "),s("p",[t._v("闭包的两个用途")]),t._v(" "),s("ul",[s("li",[t._v("能够保留访问其他作用域中的变量值")]),t._v(" "),s("li",[t._v("作为参数使用")])])])},[],!1,null,null,null);a.default=r.exports}}]);